{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\breno\\\\front\\\\homingPigeon\\\\client\\\\src\\\\pages\\\\Home\\\\index.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport TweetForm from \"../../components/TweetForm\";\nimport TweetList from \"../../components/TweetList\";\nimport Layout from \"../../components/Layout\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Home() {\n  _s();\n  const [tweets, setTweets] = useState([]);\n  useEffect(() => {\n    const fetchTweets = async () => {\n      try {\n        const token = localStorage.getItem(\"SESSION_TOKEN\");\n        const tweetResponse = await axios.get(`${process.env.REACT_APP_SERVER_URL}/tweets`, {\n          // eslint-disable-next-line no-use-before-define\n          headers: {\n            \"authToken\": token\n          }\n        });\n        const tweetUsers = await Promise.all(tweetResponse.data.map(async tweet => {\n          const user = await axios.get(`${process.env.REACT_APP_SERVER_URL}/users/${tweet.owner}`, {\n            headers: {\n              \"auth-token\": token\n            }\n          });\n          return {\n            ...tweet,\n            username: user.data.username\n          };\n        }));\n        setTweets(tweetUsers);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchTweets();\n  }, []);\n  const handleLike = (ownerID, tweetID) => {\n    console.log(ownerID, tweetID);\n    const newTweets = tweets.map(tweet => {\n      if (tweet.id === tweetID) {\n        const tweetLiked = tweet.likes.found(owner => owner === owner.ID);\n        if (tweetLiked) {\n          return {\n            ...tweet,\n            likes: tweet.likes.filter(owner => owner !== ownerID)\n          };\n        }\n        return {\n          ...tweet,\n          likes: [...tweet.likes, ownerID]\n        };\n      }\n      return tweet;\n    });\n    setTweets(newTweets.reverse());\n  };\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Welcome 2 homingPigeon!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(TweetForm, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(TweetList, {\n      tweets: tweets,\n      onLike: handleLike\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 3\n  }, this);\n}\n_s(Home, \"tlPhWtKxaAnAviYMgoNvFaAwXFo=\");\n_c = Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useState","useEffect","axios","TweetForm","TweetList","Layout","jsxDEV","_jsxDEV","Home","_s","tweets","setTweets","fetchTweets","token","localStorage","getItem","tweetResponse","get","process","env","REACT_APP_SERVER_URL","headers","tweetUsers","Promise","all","data","map","tweet","user","owner","username","error","console","handleLike","ownerID","tweetID","log","newTweets","id","tweetLiked","likes","found","ID","filter","reverse","children","fileName","_jsxFileName","lineNumber","columnNumber","onLike","_c","$RefreshReg$"],"sources":["C:/Users/breno/front/homingPigeon/client/src/pages/Home/index.js"],"sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport axios from \"axios\"\n\nimport TweetForm from \"../../components/TweetForm\"\nimport TweetList from \"../../components/TweetList\"\nimport Layout from \"../../components/Layout\"\n\nexport default function Home(){\n\tconst[tweets, setTweets] = useState([])\n\tuseEffect(()=>{\n\t\tconst fetchTweets = async () => {\n\t\t\ttry {\n\t\t\t\tconst token = localStorage.getItem(\"SESSION_TOKEN\")\n\t\t\t\t\n\t\t\t\tconst tweetResponse = await axios.get(`${process.env.REACT_APP_SERVER_URL}/tweets`, \n\t\t\t\t\t{\n\t\t\t\t\t\t// eslint-disable-next-line no-use-before-define\n\t\t\t\t\t\theaders:{\"authToken\": token }\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tconst tweetUsers = await Promise.all(\n\t\t\t\t\ttweetResponse.data.map(async tweet => {\n\t\t\t\t\t\tconst user = await axios.get(`${process.env.REACT_APP_SERVER_URL}/users/${tweet.owner}`,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\theaders: {\"auth-token\": token}\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t\t\n\t\t\t\t\treturn {...tweet, username: user.data.username}\n\t\t\t\t})\n\t\t\t)\n\t\t\tsetTweets(tweetUsers)\n\t\t\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error)\n\t\t\t}\n\t\t}\n\t\tfetchTweets()\n\t},[])\n\t\n\tconst handleLike =(ownerID, tweetID) =>{\n\t\tconsole.log(ownerID, tweetID)\n\t\t\n\t\tconst newTweets =tweets.map(tweet=>{\n\t\t\tif(tweet.id === tweetID){\n\t\t\t\tconst tweetLiked = tweet.likes.found(owner => owner ===owner.ID)\n\t\t\t\t\n\t\t\t\tif (tweetLiked){\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...tweet,\n\t\t\t\t\t\tlikes: tweet.likes.filter(owner=>owner!==ownerID)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn {...tweet, likes:[...tweet.likes, ownerID]}\n\t\t\t\t\n\t\t\t}\n\t\t\treturn tweet\n\t\t})\n\t\tsetTweets(newTweets.reverse())\n\t}\n\n\treturn(\n\t\t<Layout>\n\t\t\t<div>Welcome 2 homingPigeon!</div>\n\t\t\t<TweetForm></TweetForm>\n\t\t\t<TweetList tweets={tweets} onLike={handleLike}/>\n\t\t</Layout>\n\t)\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}